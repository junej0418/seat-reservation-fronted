<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëœì„ ì„ ì˜ˆì•½ ì‹œìŠ¤í…œ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 40px;
      max-width: 500px;
      width: 100%;
    }
    
    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 30px;
      font-size: 28px;
    }
    
    h2 {
      text-align: center;
      color: #667eea;
      margin-bottom: 20px;
      font-size: 24px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
    }
    
    input[type="text"],
    input[type="password"],
    input[type="datetime-local"],
    select,
    textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    
    input[type="text"]:focus,
    input[type="password"]:focus,
    input[type="datetime-local"]:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      margin-top: 10px;
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
    }
    
    .screen {
      display: none;
    }
    
    .screen.active {
      display: block;
    }
    
    /* ì¸µ ì„ íƒ í™”ë©´ */
    #floorSelectScreen .container {
      max-width: 600px;
    }
    
    .floor-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    
    .floor-btn {
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .floor-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    /* ì¢Œì„ ë°°ì¹˜ë„ í™”ë©´ */
    #seatMapScreen .container {
      max-width: 900px;
    }
    
    .seat-grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 10px;
      margin: 20px 0;
    }
    
    .seat {
      aspect-ratio: 1;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      background: white;
    }
    
    .seat.available {
      background: #e8f5e9;
      border-color: #4caf50;
      color: #2e7d32;
    }
    
    .seat.available:hover {
      background: #c8e6c9;
      transform: scale(1.05);
    }
    
    .seat.reserved {
      background: #ffebee;
      border-color: #f44336;
      color: #c62828;
      cursor: not-allowed;
    }
    
    .seat.my-seat {
      background: #e3f2fd;
      border-color: #2196f3;
      color: #1565c0;
      font-weight: 700;
    }
    
    .seat.my-seat:hover {
      background: #bbdefb;
      transform: scale(1.05);
    }
    
    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .legend-box {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 2px solid;
    }
    
    .legend-box.available {
      background: #e8f5e9;
      border-color: #4caf50;
    }
    
    .legend-box.reserved {
      background: #ffebee;
      border-color: #f44336;
    }
    
    .legend-box.my-seat {
      background: #e3f2fd;
      border-color: #2196f3;
    }
    
    /* ê´€ë¦¬ì í˜ì´ì§€ */
    #adminScreen .container {
      max-width: 1200px;
    }
    
    .admin-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f5f5f5;
      border-radius: 10px;
    }
    
    .admin-section h3 {
      color: #667eea;
      margin-bottom: 15px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      border-radius: 8px;
      overflow: hidden;
    }
    
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    th {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 600;
    }
    
    tr:hover {
      background: #f5f5f5;
    }
    
    .action-btn {
      padding: 6px 12px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .action-btn:hover {
      background: #d32f2f;
    }
    
    .view-password-btn {
      padding: 6px 12px;
      background: #2196f3;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 5px;
    }
    
    .view-password-btn:hover {
      background: #1976d2;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    
    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
    
    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    
    .modal-content h2 {
      margin-bottom: 20px;
    }
    
    .modal-content p {
      margin-bottom: 15px;
      line-height: 1.6;
      color: #555;
    }
    
    .modal-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .modal-buttons button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }
    
    /* ê°œì¸ì •ë³´ ë™ì˜ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    #privacyConsentModal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }

    #privacyConsentModal .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
    }

    #privacyConsentModal h2 {
      color: #333;
      border-bottom: 2px solid #4CAF50;
      padding-bottom: 10px;
      text-align: center;
      margin-bottom: 20px;
    }

    #privacyConsentModal h3 {
      color: #4CAF50;
      margin-top: 15px;
      margin-bottom: 8px;
      font-size: 16px;
    }

    #privacyConsentModal p, #privacyConsentModal li {
      color: #555;
      font-size: 14px;
    }

    #privacyConsentModal ul {
      margin-left: 20px;
      margin-bottom: 10px;
    }

    .privacy-content {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 5px;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .consent-checkbox-wrapper {
      text-align: center;
      margin: 20px 0;
    }

    .consent-checkbox-wrapper label {
      font-size: 16px;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
    }

    .consent-checkbox-wrapper input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      cursor: pointer;
    }

    .privacy-buttons {
      text-align: center;
    }

    .privacy-buttons button {
      padding: 12px 40px;
      font-size: 16px;
      margin: 0 5px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    #privacyConsentAgreeBtn {
      background: #4CAF50;
      color: white;
    }

    #privacyConsentAgreeBtn:hover {
      background: #45a049;
    }

    #privacyConsentCancelBtn {
      background: #f44336;
      color: white;
    }

    #privacyConsentCancelBtn:hover {
      background: #da190b;
    }
    
    /* ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      .seat-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 5px;
      }
      
      .floor-buttons {
        grid-template-columns: 1fr;
      }
      
      table {
        font-size: 14px;
      }
      
      th, td {
        padding: 8px;
      }
    }
  </style>
</head>
<body>
  <!-- ë¡œê·¸ì¸ í™”ë©´ -->
  <div id="loginScreen" class="screen active">
    <div class="container">
      <h1>ğŸ–¥ï¸ ëœì„ ì„ ì˜ˆì•½ ë¡œê·¸ì¸</h1>
      <div class="form-group">
        <label for="roomNoInput">ë£¸ ë²ˆí˜¸ (000í˜¸ í˜•ì‹):</label>
        <input type="text" id="roomNoInput" placeholder="ì˜ˆ: 123" maxlength="3">
      </div>
      <div class="form-group">
        <label for="nameInput">ì´ë¦„ (í•œê¸€ 2~4ì):</label>
        <input type="text" id="nameInput" placeholder="í™ê¸¸ë™">
      </div>
      <div class="form-group">
        <label for="dormitorySelect">ê¸°ìˆ™ì‚¬ ì„ íƒ:</label>
        <select id="dormitorySelect">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="ê¿ˆë™">ê¿ˆë™</option>
          <option value="ë¯¸ë˜ë™">ë¯¸ë˜ë™</option>
        </select>
      </div>
      <div class="form-group">
        <label for="passwordInput">ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸ (4ì ì´ìƒ):</label>
        <input type="password" id="passwordInput" placeholder="ë¹„ë°€ë²ˆí˜¸">
      </div>
      <button class="btn" id="loginNextBtn">ë‹¤ìŒ</button>
      <button class="btn btn-secondary" id="adminLoginBtn">ê´€ë¦¬ì ë¡œê·¸ì¸</button>
    </div>
  </div>

  <!-- ì¸µ ì„ íƒ í™”ë©´ -->
  <div id="floorSelectScreen" class="screen">
    <div class="container">
      <h1><span id="userNameDisplay"></span>ë‹˜, ì¸µì„ ì„ íƒí•´ì£¼ì„¸ìš”</h1>
      <div class="floor-buttons">
        <button class="floor-btn" data-floor="2ì¸µ">2ì¸µ</button>
        <button class="floor-btn" data-floor="3ì¸µ">3ì¸µ</button>
        <button class="floor-btn" data-floor="4ì¸µ">4ì¸µ</button>
        <button class="floor-btn" data-floor="5ì¸µ">5ì¸µ</button>
      </div>
      <button class="btn btn-secondary" id="backToLoginBtn">ë’¤ë¡œê°€ê¸°</button>
    </div>
  </div>

  <!-- ì¢Œì„ ì„ íƒ í™”ë©´ -->
  <div id="seatMapScreen" class="screen">
    <div class="container">
      <h2>ì¢Œì„ ë°°ì¹˜ë„ - <span id="currentFloorDisplay"></span></h2>
      <div class="legend">
        <div class="legend-item">
          <div class="legend-box available"></div>
          <span>ë¹ˆìë¦¬</span>
        </div>
        <div class="legend-item">
          <div class="legend-box reserved"></div>
          <span>ì˜ˆì•½ë¨</span>
        </div>
        <div class="legend-item">
          <div class="legend-box my-seat"></div>
          <span>ë‚´ ìë¦¬</span>
        </div>
      </div>
      <div class="seat-grid" id="seatGrid"></div>
      <div style="display: flex; gap: 10px; margin-top: 20px;">
        <button class="btn btn-secondary" id="backToFloorBtn" style="flex: 1;">ë’¤ë¡œê°€ê¸°</button>
        <button class="btn btn-danger" id="cancelMyReservationBtn" style="flex: 1;">ë‚´ ì˜ˆì•½ ì·¨ì†Œ</button>
        <button class="btn btn-success" id="confirmReservationBtn" style="flex: 1;">ì˜ˆì•½ í™•ì •</button>
      </div>
    </div>
  </div>

  <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ í™”ë©´ -->
  <div id="adminLoginScreen" class="screen">
    <div class="container">
      <h1>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h1>
      <div class="form-group">
        <label for="adminUsernameInput">ê´€ë¦¬ì ì´ë¦„:</label>
        <input type="text" id="adminUsernameInput" placeholder="ê´€ë¦¬ì ì´ë¦„">
      </div>
      <div class="form-group">
        <label for="adminPasswordInput">ë¹„ë°€ë²ˆí˜¸:</label>
        <input type="password" id="adminPasswordInput" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸">
      </div>
      <button class="btn" id="adminLoginSubmitBtn">ë¡œê·¸ì¸</button>
      <button class="btn btn-secondary" id="backToLoginFromAdminBtn">ë¡œê·¸ì¸í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
  </div>

  <!-- ê´€ë¦¬ì í˜ì´ì§€ -->
  <div id="adminScreen" class="screen">
    <div class="container">
      <h1>âš™ï¸ ê´€ë¦¬ì í˜ì´ì§€</h1>
      <button class="btn btn-danger" id="adminLogoutBtn" style="margin-bottom: 20px;">ë¡œê·¸ì•„ì›ƒ</button>
      
      <!-- ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ ì„¤ì • -->
      <div class="admin-section">
        <h3>ğŸ“… ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ ì„¤ì •</h3>
        <div class="form-group">
          <label for="reservationStartTime">ì˜ˆì•½ ì‹œì‘ ì‹œê°„:</label>
          <input type="datetime-local" id="reservationStartTime">
        </div>
        <div class="form-group">
          <label for="reservationEndTime">ì˜ˆì•½ ì¢…ë£Œ ì‹œê°„:</label>
          <input type="datetime-local" id="reservationEndTime">
        </div>
        <button class="btn btn-success" id="saveReservationTimesBtn">ì‹œê°„ ì„¤ì • ì €ì¥</button>
      </div>

      <!-- ì „ì²´ ê³µì§€ì‚¬í•­ ì„¤ì • -->
      <div class="admin-section">
        <h3>ğŸ“¢ ì „ì²´ ê³µì§€ì‚¬í•­ ì„¤ì • (ì‚¬ìš©ìì—ê²Œë„ í‘œì‹œ)</h3>
        <div class="form-group">
          <label for="announcementText">ê³µì§€ ë‚´ìš©:</label>
          <textarea id="announcementText" placeholder="ê³µì§€ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="announcementActive">
          <label for="announcementActive">ê³µì§€ í™œì„±í™”</label>
        </div>
        <button class="btn btn-success" id="saveAnnouncementBtn" style="margin-top: 10px;">ê³µì§€ ì €ì¥</button>
      </div>

      <!-- ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ì„¤ì • -->
      <div class="admin-section">
        <h3>ğŸ”’ ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ì„¤ì • (ê´€ë¦¬ìì—ê²Œë§Œ í‘œì‹œ)</h3>
        <div class="form-group">
          <label for="adminAnnouncementText">ê´€ë¦¬ì ê³µì§€ ë‚´ìš©:</label>
          <textarea id="adminAnnouncementText" placeholder="ê´€ë¦¬ì ì „ìš© ê³µì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="adminAnnouncementActive">
          <label for="adminAnnouncementActive">ê³µì§€ í™œì„±í™”</label>
        </div>
        <button class="btn btn-success" id="saveAdminAnnouncementBtn" style="margin-top: 10px;">ê³µì§€ ì €ì¥</button>
      </div>

      <!-- ì˜ˆì•½ í˜„í™© -->
      <div class="admin-section">
        <h3>ğŸ“‹ ì˜ˆì•½ í˜„í™©</h3>
        <div style="overflow-x: auto;">
          <table id="reservationTable">
            <thead>
              <tr>
                <th>ì´ë¦„</th>
                <th>ë£¸ ë²ˆí˜¸</th>
                <th>ê¸°ìˆ™ì‚¬</th>
                <th>ì¸µ</th>
                <th>ìë¦¬ ë²ˆí˜¸</th>
                <th>ì˜ˆì•½ ì‹œê°„</th>
                <th>ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸</th>
                <th>ê¸°ëŠ¥</th>
              </tr>
            </thead>
            <tbody id="reservationTableBody">
            </tbody>
          </table>
        </div>
        <button class="btn btn-danger" id="deleteAllReservationsBtn" style="margin-top: 20px;">ëª¨ë“  ì˜ˆì•½ ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <!-- ê³µì§€ì‚¬í•­ ëª¨ë‹¬ -->
  <div id="announcementModal" class="modal">
    <div class="modal-content">
      <h2>ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
      <p id="announcementModalText"></p>
      <button class="btn" id="closeAnnouncementModalBtn">ë‹«ê¸°</button>
    </div>
  </div>

  <!-- ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ëª¨ë‹¬ -->
  <div id="adminAnnouncementModal" class="modal">
    <div class="modal-content">
      <h2>ğŸ”’ ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­</h2>
      <p id="adminAnnouncementModalText"></p>
      <button class="btn" id="closeAdminAnnouncementModalBtn">ë‹«ê¸°</button>
    </div>
  </div>

  <!-- ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜ ëª¨ë‹¬ -->
  <div id="privacyConsentModal" style="display:none;">
  <div class="modal-content">
    <h2>ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜</h2>
    
    <div class="privacy-content">
      <p style="margin-bottom: 15px; line-height: 1.6;">
        ë³¸ ê¸°ìˆ™ì‚¬ ëœì„ ì„ ì˜ˆì•½ ì‹œìŠ¤í…œ(ì´í•˜ 'ë³¸ ì‹œìŠ¤í…œ')ì€ ì •ë³´ì£¼ì²´ì˜ ê°œì¸ì •ë³´ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ë©°, ã€Œê°œì¸ì •ë³´ ë³´í˜¸ë²•ã€ ë“± ê´€ë ¨ ë²•ë ¹ì„ ì¤€ìˆ˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‚¬í•­ì— ëŒ€í•˜ì—¬ ë™ì˜í•˜ì‹œë©´, ë³¸ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>

      <h3>1. ê°œì¸ì •ë³´ì²˜ë¦¬ìì˜ ëª…ì¹­</h3>
      <p>ë³¸ ì‹œìŠ¤í…œì˜ ê°œì¸ì •ë³´ì²˜ë¦¬ìëŠ” ê³ ì–‘êµ­ì œê³  ê¸°ìˆ™ì‚¬ë¶€ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ê³ ì–‘êµ­ì œê³  ê¸°ìˆ™ì‚¬ë¶€ë¼ í•¨ì€ ê¿ˆë™, ë¯¸ë˜ë™ ì‚¬ê°ì‹¤ì„ í¬í•¨í•˜ì—¬ í•™ìƒíšŒ ê¸°ìˆ™ìƒí™œë¶€, ê¸°ìˆ™ì‚¬ ê´€ë ¨ ë¶€ì„œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</p>

      <h3>2. ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš© ëª©ì </h3>
      <p>ë³¸ ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì€ ëª©ì ìœ¼ë¡œ í•™ìƒì˜ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘ ë° ì´ìš©í•©ë‹ˆë‹¤.</p>
      <ul>
        <li>ê¸°ìˆ™ì‚¬ ëœì„ ì„ ì˜ˆì•½ ë° ì¢Œì„ ë°°ì •</li>
        <li>ì˜ˆì•½ì ë³¸ì¸ í™•ì¸ ë° ì¤‘ë³µ ì˜ˆì•½ ë°©ì§€</li>
        <li>ì˜ˆì•½ í˜„í™© ê´€ë¦¬</li>
        <li>ì„œë¹„ìŠ¤ ì´ìš© ê´€ë ¨ ê³µì§€ì‚¬í•­ ì „ë‹¬</li>
      </ul>

      <h3>3. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ í•­ëª©</h3>
      <p>ë³¸ ì‹œìŠ¤í…œì€ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.</p>
      <ul>
        <li>í•„ìˆ˜í•­ëª©: ì´ë¦„, ë£¸ ë²ˆí˜¸, ê¸°ìˆ™ì‚¬ ê±´ë¬¼ëª…, ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸</li>
        <li>ìë™ ìˆ˜ì§‘ í•­ëª©: ì ‘ì† ê¸°ê¸° IP ì£¼ì†Œ, ì˜ˆì•½ ì¼ì‹œ, ì¢Œì„ ìœ„ì¹˜(ì¸µ ë° ì¢Œì„ ë²ˆí˜¸)</li>
      </ul>

      <h3>4. ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° ì´ìš© ê¸°ê°„</h3>
      <p>ìˆ˜ì§‘ëœ ê°œì¸ì •ë³´ëŠ” ì˜ˆì•½ ê´€ë¦¬ ë° í•™ì‚¬ í–‰ì • ëª©ì ì„ ìœ„í•´ í•™ê¸° ì¢…ë£Œ í›„ 1ë…„ê¹Œì§€ ë³´ê´€ë˜ë©°, í•´ë‹¹ ê¸°ê°„ ê²½ê³¼ ì‹œ ì§€ì²´ ì—†ì´ íŒŒê¸°ë©ë‹ˆë‹¤. ë‹¤ë§Œ, ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ë³´ì¡´ ì˜ë¬´ê°€ ìˆëŠ” ê²½ìš° í•´ë‹¹ ë²•ë ¹ì´ ì •í•œ ê¸°ê°„ ë™ì•ˆ ë³´ê´€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

      <h3>5. ê°œì¸ì •ë³´ì˜ íŒŒê¸° ì ˆì°¨ ë° ë°©ë²•</h3>
      <p>ê°œì¸ì •ë³´ëŠ” ë³´ìœ  ê¸°ê°„ì´ ê²½ê³¼í•œ í›„ì—ëŠ” ë‹¤ìŒ ì ˆì°¨ ë° ë°©ë²•ì— ë”°ë¼ íŒŒê¸°ë©ë‹ˆë‹¤.</p>
      <ul>
        <li><strong>íŒŒê¸° ì ˆì°¨:</strong> ì •ë³´ì£¼ì²´ë¡œë¶€í„° ë™ì˜ë°›ì€ ê°œì¸ì •ë³´ ë³´ìœ ê¸°ê°„ì´ ê²½ê³¼í•˜ê±°ë‚˜ ì²˜ë¦¬ ëª©ì ì´ ë‹¬ì„±ëœ í›„ ë‚´ë¶€ ë°©ì¹¨ ë° ê¸°íƒ€ ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ì¼ì • ê¸°ê°„ ì €ì¥ëœ í›„ íŒŒê¸°ë©ë‹ˆë‹¤.</li>
        <li><strong>íŒŒê¸° ë°©ë²•:</strong> ì „ìì  íŒŒì¼ í˜•íƒœë¡œ ê¸°ë¡ëœ ê°œì¸ì •ë³´ëŠ” MongoDB Atlas ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì˜êµ¬ ì‚­ì œí•˜ë©°, ì¢…ì´ ë¬¸ì„œì— ê¸°ë¡ëœ ê°œì¸ì •ë³´ëŠ” ë¶„ì‡„ê¸°ë¡œ ë¶„ì‡„í•˜ê±°ë‚˜ ì†Œê°í•˜ì—¬ íŒŒê¸°í•©ë‹ˆë‹¤.</li>
      </ul>

      <h3>6. ê°œì¸ì •ë³´ì˜ ì œ3ì ì œê³µ</h3>
      <p>ë³¸ ì‹œìŠ¤í…œì€ ì •ë³´ì£¼ì²´ì˜ ê°œì¸ì •ë³´ë¥¼ ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ë° ì´ìš© ëª©ì ì—ì„œ ëª…ì‹œí•œ ë²”ìœ„ ë‚´ì—ì„œë§Œ ì´ìš©í•˜ë©°, ì •ë³´ì£¼ì²´ì˜ ì‚¬ì „ ë™ì˜ ì—†ì´ í•´ë‹¹ ë²”ìœ„ë¥¼ ì´ˆê³¼í•˜ì—¬ ì´ìš©í•˜ê±°ë‚˜ ì›ì¹™ì ìœ¼ë¡œ ì œ3ìì—ê²Œ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨, ë‹¤ìŒì˜ ê²½ìš°ì—ëŠ” ê°œì¸ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <ul>
        <li>ì •ë³´ì£¼ì²´(í•™ìƒ) ë³¸ì¸ì´ ìì‹ ì˜ ì •ë³´ë¥¼ ì—´ëŒí•˜ëŠ” ê²½ìš°</li>
        <li>í•™êµ ì¸¡ì˜ ì •ë‹¹í•œ ìš”ì²­ìœ¼ë¡œ ì˜ˆì•½ ë‚´ì—­ ë“±ì„ ê³µê°œí•´ì•¼ í•˜ëŠ” ê²½ìš°</li>
        <li>ì‹œìŠ¤í…œ ê´€ë¦¬ ê¶Œí•œì„ ê°€ì§„ ë‹´ë‹¹ êµì‚¬ ë˜ëŠ” ê´€ë¦¬ìê°€ í•™ìƒë“¤ì˜ ì˜ˆì•½ í˜„í™©ì„ ì¡°íšŒí•˜ëŠ” ê²½ìš°</li>
        <li>ë²•ë ¹ì˜ ê·œì •ì— ì˜ê±°í•˜ê±°ë‚˜, ìˆ˜ì‚¬ ëª©ì ìœ¼ë¡œ ë²•ë ¹ì— ì •í•´ì§„ ì ˆì°¨ì™€ ë°©ë²•ì— ë”°ë¼ ìˆ˜ì‚¬ê¸°ê´€ì˜ ìš”êµ¬ê°€ ìˆëŠ” ê²½ìš°</li>
      </ul>

      <h3>7. ê°œì¸ì •ë³´ ì²˜ë¦¬ ì—…ë¬´ì˜ ìœ„íƒ</h3>
      <p>ë³¸ ì‹œìŠ¤í…œì€ ì›í™œí•œ ê°œì¸ì •ë³´ ì²˜ë¦¬ ì—…ë¬´ë¥¼ ìœ„í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ê°œì¸ì •ë³´ ì²˜ë¦¬ ì—…ë¬´ë¥¼ ìœ„íƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
      <ul>
        <li><strong>ìˆ˜íƒì—…ì²´:</strong> Render (í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ì œê³µ ë° ë°±ì—”ë“œ ì„œë²„ ìš´ì˜)</li>
        <li><strong>ìˆ˜íƒì—…ì²´:</strong> Netlify (í”„ë¡ íŠ¸ì—”ë“œ ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ë° ìš´ì˜)</li>
        <li><strong>ìˆ˜íƒì—…ì²´:</strong> MongoDB Atlas (ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ ì œê³µ)</li>
        <li><strong>ìœ„íƒ ì—…ë¬´ ë‚´ìš©:</strong> ì‹œìŠ¤í…œ ì„œë²„ ìš´ì˜ ë° ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬, ì„œë¹„ìŠ¤ ì¸í”„ë¼ ì œê³µ ë“±</li>
      </ul>
      <p>ìœ„íƒ ê³„ì•½ ì‹œ ã€Œê°œì¸ì •ë³´ ë³´í˜¸ë²•ã€ ë“± ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ìœ„íƒ ì—…ë¬´ ìˆ˜í–‰ ëª©ì  ì™¸ ê°œì¸ì •ë³´ ì²˜ë¦¬ ê¸ˆì§€, ê¸°ìˆ ì Â·ê´€ë¦¬ì  ë³´í˜¸ì¡°ì¹˜ ë“± ì±…ì„ì— ê´€í•œ ì‚¬í•­ì„ í™•ì¸í•˜ê³  ìˆ˜íƒìê°€ ê°œì¸ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ê°ë…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>

      <h3>8. ì •ë³´ì£¼ì²´ì˜ ê¶Œë¦¬ í–‰ì‚¬ ë°©ë²•</h3>
      <p>ì •ë³´ì£¼ì²´(í•™ìƒ)ëŠ” ì–¸ì œë“ ì§€ ê°œì¸ì •ë³´ ì—´ëŒ, ì •ì •Â·ì‚­ì œ, ì²˜ë¦¬ì •ì§€ ìš”ì²­ ë° ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ ì² íšŒë¥¼ ìš”êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¶Œë¦¬ í–‰ì‚¬ëŠ” ë‹´ë‹¹ ë¶€ì„œ ë˜ëŠ” ê´€ë¦¬ìì—ê²Œ ì„œë©´, ì „í™” ë“±ì„ í†µí•˜ì—¬ ìš”ì²­í•˜ì‹œë©´ ì§€ì²´ ì—†ì´ ì¡°ì¹˜í•˜ê² ìŠµë‹ˆë‹¤. ë‹¨, ê¶Œë¦¬ í–‰ì‚¬ ì‹œ ê´€ë¦¬ìê°€ ë³¸ì¸ í™•ì¸ ë“±ì˜ í™•ì¸ ì ˆì°¨ë¥¼ ê±°ì¹˜ê¸° ìœ„í•´ ì¶”ê°€ì ì¸ ê°œì¸ì •ë³´ë¥¼ ìš”êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

      <h3>9. ë™ì˜ ê±°ë¶€ê¶Œ ë° ë¶ˆì´ìµ</h3>
      <p>ê·€í•˜ëŠ” ìœ„ ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, í•„ìˆ˜í•­ëª©ì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•˜ì‹¤ ê²½ìš°, ë³¸ ì‹œìŠ¤í…œì˜ ëœì„ ì„ ì˜ˆì•½ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë©ë‹ˆë‹¤.</p>

      <h3>10. ê°œì¸ì •ë³´ì˜ ì•ˆì „ì„± í™•ë³´ ì¡°ì¹˜</h3>
      <p>ë³¸ ì‹œìŠ¤í…œì€ ã€Œê°œì¸ì •ë³´ ë³´í˜¸ë²•ã€ ì œ29ì¡°ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ì•ˆì „ì„± í™•ë³´ì— í•„ìš”í•œ ê¸°ìˆ ì Â·ê´€ë¦¬ì  ë° ë¬¼ë¦¬ì  ì¡°ì¹˜ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
      <ul>
        <li>ê°œì¸ì •ë³´ ì·¨ê¸‰ ë‹´ë‹¹ìì˜ ìµœì†Œí™” ë° êµìœ¡</li>
        <li>ë‚´ë¶€ ê´€ë¦¬ ê³„íš ìˆ˜ë¦½ ë° ì‹œí–‰</li>
        <li>ê°œì¸ì •ë³´ ë°ì´í„° ì•”í˜¸í™” (ë¹„ë°€ë²ˆí˜¸ bcrypt í•´ì‹± ì²˜ë¦¬)</li>
        <li>ê°œì¸ì •ë³´ ì¡°íšŒ ì‹œ ë¡œê·¸ì¸ ë° ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ í•„ìš”</li>
        <li>ê°œì¸ì •ë³´ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ í†µì œ ë° ì ‘ê·¼ ê¶Œí•œ ì œí•œ</li>
        <li>ì ‘ì† ê¸°ë¡ì˜ ë³´ê´€ ë° ìœ„Â·ë³€ì¡° ë°©ì§€ ì¡°ì¹˜</li>
        <li>ë³´ì•ˆ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ ë° ì£¼ê¸°ì  ê°±ì‹ </li>
        <li>ìƒì„±í˜• ì¸ê³µì§€ëŠ¥ ë“±ì˜ AIë¥¼ í™œìš©í•œ ì ‘ê·¼ ì œí•œ</li>
      </ul>

      <h3>11. ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ ë³€ê²½ì— ê´€í•œ ì‚¬í•­</h3>
      <p>ë³¸ ì²˜ë¦¬ë°©ì¹¨ì€ 2025ë…„ 11ì›” 18ì¼ë¶€í„° ì ìš©ë©ë‹ˆë‹¤. ë²•ë ¹ ë° ë°©ì¹¨ì— ë”°ë¥¸ ë³€ê²½ ë‚´ìš© ì¶”ê°€, ì‚­ì œ ë° ì •ì •ì´ ìˆì„ ê²½ìš°ì—ëŠ” ë³€ê²½ì‚¬í•­ ì‹œí–‰ 7ì¼ ì „ë¶€í„° ì›¹ì‚¬ì´íŠ¸ ê³µì§€ì‚¬í•­ì„ í†µí•˜ì—¬ ê³ ì§€í•˜ë©°, ë¶ˆê°€í”¼í•˜ê²Œ ì •ë³´ì£¼ì²´ì˜ ê¶Œë¦¬ ë˜ëŠ” ì˜ë¬´ì— ì¤‘ëŒ€í•œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë³€ê²½ì˜ ê²½ìš°ì—ëŠ” 30ì¼ ì „ë¶€í„° ê³ ì§€í•©ë‹ˆë‹¤.</p>
    </div>
      
      <div class="consent-checkbox-wrapper">
        <label>
          <input type="checkbox" id="privacyConsentCheck">
          ìœ„ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.
        </label>
      </div>
      
      <div class="privacy-buttons">
        <button id="privacyConsentAgreeBtn">ë™ì˜</button>
        <button id="privacyConsentCancelBtn">ì·¨ì†Œ</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script>
    // API ê¸°ë³¸ URL ì„¤ì •
    const API_BASE = 'http://localhost:3000'; // ë°°í¬ ì‹œ ì‹¤ì œ ì„œë²„ URLë¡œ ë³€ê²½

    // Socket.IO ì—°ê²°
    const socket = io(API_BASE);

    // ì „ì—­ ë³€ìˆ˜
    let currentUser = null;
    let selectedFloor = null;
    let selectedSeat = null;
    let allReservations = [];
    let adminCredentials = null;

    // í™”ë©´ ì „í™˜ í•¨ìˆ˜
    function showScreen(screenId) {
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });
      document.getElementById(screenId).classList.add('active');
    }

    // ===== ê°œì¸ì •ë³´ ë™ì˜ ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜ (ì‹ ê·œ ì¶”ê°€) =====
    function showPrivacyConsentModal(roomNo, name, dormitory, password) {
      const modal = document.getElementById('privacyConsentModal');
      const checkbox = document.getElementById('privacyConsentCheck');
      const agreeBtn = document.getElementById('privacyConsentAgreeBtn');
      const cancelBtn = document.getElementById('privacyConsentCancelBtn');
      
      // ì´ˆê¸°í™”
      checkbox.checked = false;
      
      // ëª¨ë‹¬ í‘œì‹œ
      modal.style.display = 'flex';
      
      // ë™ì˜ ë²„íŠ¼ í´ë¦­
      agreeBtn.onclick = async function() {
        if(!checkbox.checked) {
          alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
          return;
        }
        
        // ë™ì˜ ì •ë³´ ì„œë²„ì— ì €ì¥
        try {
          const response = await fetch(`${API_BASE}/api/privacy-consent`, {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({roomNo, name, dormitory})
          });
          
          const data = await response.json();
          
          if(data.success) {
            modal.style.display = 'none';
            // ì¸µ ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™
            proceedToFloorSelection(roomNo, name, dormitory, password);
          } else {
            alert('ë™ì˜ ì •ë³´ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          }
        } catch(err) {
          console.error('ê°œì¸ì •ë³´ ë™ì˜ ì €ì¥ ì‹¤íŒ¨:', err);
          alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        }
      };
      
      // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­
      cancelBtn.onclick = function() {
        modal.style.display = 'none';
        alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•˜ì§€ ì•Šìœ¼ë©´ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      };
    }

    // ===== ì¸µ ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜ (ì‹ ê·œ ì¶”ê°€) =====
    function proceedToFloorSelection(roomNo, name, dormitory, password) {
      currentUser = {roomNo, name, dormitory, password};
      document.getElementById('loginScreen').style.display = 'none';
      document.getElementById('floorSelectScreen').style.display = 'block';
      document.getElementById('userNameDisplay').textContent = name;
      showScreen('floorSelectScreen');
    }

    // ë¡œê·¸ì¸ ë‹¤ìŒ ë²„íŠ¼ (ê°œì¸ì •ë³´ ë™ì˜ í™•ì¸ ë¡œì§ ì¶”ê°€)
    document.getElementById('loginNextBtn').addEventListener('click', async function(){
      const roomNo = document.getElementById('roomNoInput').value.trim();
      const name = document.getElementById('nameInput').value.trim();
      const dormitorySelect = document.getElementById('dormitorySelect');
      const dormitory = dormitorySelect.value;
      const password = document.getElementById('passwordInput').value.trim();
      
      // ìœ íš¨ì„± ê²€ì‚¬
      if(!roomNo){
        alert('ë£¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      const roomNoPattern = /^\d{3}$/;
      if(!roomNoPattern.test(roomNo)){
        alert('ë£¸ ë²ˆí˜¸ëŠ” 000í˜¸ í˜•ì‹(3ìë¦¬ ìˆ«ì)ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if(!name){
        alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      const namePattern = /^[ê°€-í£]{2,4}$/;
      if(!namePattern.test(name)){
        alert('ì´ë¦„ì€ í•œê¸€ 2~4ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if(!dormitory){
        alert('ê¸°ìˆ™ì‚¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      if(!password){
        alert('ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if(password.length < 4){
        alert('ì˜ˆì•½ ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }
      
      // ===== ê°œì¸ì •ë³´ ë™ì˜ í™•ì¸ (ì‹ ê·œ ì¶”ê°€) =====
      try {
        const checkResponse = await fetch(`${API_BASE}/api/privacy-consent/check`, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({roomNo, name, dormitory})
        });
        
        const checkData = await checkResponse.json();
        
        if(!checkData.success) {
          alert('ê°œì¸ì •ë³´ ë™ì˜ í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          return;
        }
        
        if(checkData.hasConsent) {
          // ì´ë¯¸ ë™ì˜í•œ ì‚¬ìš©ì - ë°”ë¡œ ì¸µ ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™
          proceedToFloorSelection(roomNo, name, dormitory, password);
        } else {
          // ë™ì˜í•˜ì§€ ì•Šì€ ì‚¬ìš©ì - ë™ì˜ ëª¨ë‹¬ í‘œì‹œ
          showPrivacyConsentModal(roomNo, name, dormitory, password);
        }
      } catch(err) {
        console.error('ê°œì¸ì •ë³´ ë™ì˜ í™•ì¸ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
      // ===== ê°œì¸ì •ë³´ ë™ì˜ í™•ì¸ ë =====
    });

    // ë’¤ë¡œê°€ê¸° ë²„íŠ¼
    document.getElementById('backToLoginBtn').addEventListener('click', function(){
      showScreen('loginScreen');
      currentUser = null;
    });

    // ì¸µ ì„ íƒ ë²„íŠ¼ë“¤
    document.querySelectorAll('.floor-btn').forEach(btn => {
      btn.addEventListener('click', function(){
        selectedFloor = this.dataset.floor;
        document.getElementById('currentFloorDisplay').textContent = selectedFloor;
        renderSeatMap();
        showScreen('seatMapScreen');
      });
    });

    // ì¢Œì„ ë°°ì¹˜ë„ì—ì„œ ë’¤ë¡œê°€ê¸°
    document.getElementById('backToFloorBtn').addEventListener('click', function(){
      showScreen('floorSelectScreen');
      selectedSeat = null;
    });

    // ì¢Œì„ ë°°ì¹˜ë„ ë Œë”ë§
    function renderSeatMap() {
      const seatGrid = document.getElementById('seatGrid');
      seatGrid.innerHTML = '';
      
      for(let i = 1; i <= 50; i++) {
        const seatDiv = document.createElement('div');
        seatDiv.className = 'seat';
        seatDiv.textContent = i;
        seatDiv.dataset.seat = i;
        
        // ì˜ˆì•½ ìƒíƒœ í™•ì¸
        const reservation = allReservations.find(r => 
          r.dormitory === currentUser.dormitory && 
          r.floor === selectedFloor && 
          r.seat === i
        );
        
        if(reservation) {
          if(reservation.roomNo === currentUser.roomNo && reservation.name === currentUser.name) {
            seatDiv.classList.add('my-seat');
            selectedSeat = i;
          } else {
            seatDiv.classList.add('reserved');
          }
        } else {
          seatDiv.classList.add('available');
        }
        
        // ì¢Œì„ í´ë¦­ ì´ë²¤íŠ¸
        seatDiv.addEventListener('click', function(){
          if(this.classList.contains('reserved')) {
            alert('ì´ë¯¸ ì˜ˆì•½ëœ ì¢Œì„ì…ë‹ˆë‹¤.');
            return;
          }
          
          // ì´ì „ ì„ íƒ ì·¨ì†Œ
          document.querySelectorAll('.seat').forEach(s => {
            if(!s.classList.contains('reserved') && !s.classList.contains('my-seat')) {
              s.classList.remove('my-seat');
              s.classList.add('available');
            }
          });
          
          // ìƒˆë¡œìš´ ì„ íƒ
          if(this.classList.contains('my-seat')) {
            // ì´ë¯¸ ë‚´ ìë¦¬ë©´ ì„ íƒ ì·¨ì†Œ
            this.classList.remove('my-seat');
            this.classList.add('available');
            selectedSeat = null;
          } else {
            this.classList.remove('available');
            this.classList.add('my-seat');
            selectedSeat = parseInt(this.dataset.seat);
          }
        });
        
        seatGrid.appendChild(seatDiv);
      }
    }

    // ì˜ˆì•½ í™•ì • ë²„íŠ¼
    document.getElementById('confirmReservationBtn').addEventListener('click', async function(){
      if(!selectedSeat) {
        alert('ì¢Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE}/api/reservations`, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            roomNo: currentUser.roomNo,
            name: currentUser.name,
            dormitory: currentUser.dormitory,
            floor: selectedFloor,
            seat: selectedSeat,
            password: currentUser.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert(data.message || 'ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        } else {
          alert(data.message || 'ì˜ˆì•½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      } catch(err) {
        console.error('ì˜ˆì•½ ìš”ì²­ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ë‚´ ì˜ˆì•½ ì·¨ì†Œ ë²„íŠ¼
    document.getElementById('cancelMyReservationBtn').addEventListener('click', async function(){
      const myReservation = allReservations.find(r => 
        r.roomNo === currentUser.roomNo && 
        r.name === currentUser.name
      );
      
      if(!myReservation) {
        alert('ì·¨ì†Œí•  ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      if(!confirm('ì •ë§ë¡œ ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE}/api/reservations/${myReservation._id}`, {
          method: 'DELETE',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            password: currentUser.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert('ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
          selectedSeat = null;
        } else {
          alert(data.message || 'ì˜ˆì•½ ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      } catch(err) {
        console.error('ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ê´€ë¦¬ì ë¡œê·¸ì¸ ë²„íŠ¼
    document.getElementById('adminLoginBtn').addEventListener('click', function(){
      showScreen('adminLoginScreen');
    });

    document.getElementById('backToLoginFromAdminBtn').addEventListener('click', function(){
      showScreen('loginScreen');
    });

    // ê´€ë¦¬ì ë¡œê·¸ì¸ ì œì¶œ
    document.getElementById('adminLoginSubmitBtn').addEventListener('click', async function(){
      const username = document.getElementById('adminUsernameInput').value.trim();
      const password = document.getElementById('adminPasswordInput').value.trim();
      
      if(!username || !password) {
        alert('ê´€ë¦¬ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE}/api/admin-login`, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({username, password})
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          adminCredentials = {username, password};
          showScreen('adminScreen');
          loadAdminData();
        } else {
          alert(data.message || 'ë¡œê·¸ì¸ ì‹¤íŒ¨');
        }
      } catch(err) {
        console.error('ê´€ë¦¬ì ë¡œê·¸ì¸ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒ
    document.getElementById('adminLogoutBtn').addEventListener('click', function(){
      adminCredentials = null;
      document.getElementById('adminUsernameInput').value = '';
      document.getElementById('adminPasswordInput').value = '';
      showScreen('loginScreen');
    });

    // ê´€ë¦¬ì ë°ì´í„° ë¡œë“œ
    async function loadAdminData() {
      // ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ ë¡œë“œ
      try {
        const response = await fetch(`${API_BASE}/api/admin-settings`);
        const settings = await response.json();
        
        if(settings.reservationStartTime) {
          document.getElementById('reservationStartTime').value = new Date(settings.reservationStartTime).toISOString().slice(0,16);
        }
        if(settings.reservationEndTime) {
          document.getElementById('reservationEndTime').value = new Date(settings.reservationEndTime).toISOString().slice(0,16);
        }
      } catch(err) {
        console.error('ê´€ë¦¬ì ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', err);
      }
      
      // ê³µì§€ì‚¬í•­ ë¡œë“œ
      try {
        const response = await fetch(`${API_BASE}/api/announcement`);
        const announcement = await response.json();
        
        document.getElementById('announcementText').value = announcement.message || '';
        document.getElementById('announcementActive').checked = announcement.active || false;
      } catch(err) {
        console.error('ê³µì§€ì‚¬í•­ ë¡œë“œ ì‹¤íŒ¨:', err);
      }
      
      // ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ë¡œë“œ
      try {
        const response = await fetch(`${API_BASE}/api/admin-announcement`);
        const adminAnnouncement = await response.json();
        
        document.getElementById('adminAnnouncementText').value = adminAnnouncement.message || '';
        document.getElementById('adminAnnouncementActive').checked = adminAnnouncement.active || false;
      } catch(err) {
        console.error('ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ë¡œë“œ ì‹¤íŒ¨:', err);
      }
      
      // ì˜ˆì•½ í˜„í™© í…Œì´ë¸” ì—…ë°ì´íŠ¸
      updateReservationTable();
    }

    // ì˜ˆì•½ ì‹œê°„ ì„¤ì • ì €ì¥
    document.getElementById('saveReservationTimesBtn').addEventListener('click', async function(){
      const startTime = document.getElementById('reservationStartTime').value;
      const endTime = document.getElementById('reservationEndTime').value;
      
      if(!startTime || !endTime) {
        alert('ì‹œì‘ ì‹œê°„ê³¼ ì¢…ë£Œ ì‹œê°„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE}/api/admin-settings`, {
          method: 'PUT',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            reservationStartTime: new Date(startTime).toISOString(),
            reservationEndTime: new Date(endTime).toISOString(),
            adminUsername: adminCredentials.username,
            adminPassword: adminCredentials.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert('ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(data.message || 'ì„¤ì • ì €ì¥ ì‹¤íŒ¨');
        }
      } catch(err) {
        console.error('ì˜ˆì•½ ì‹œê°„ ì„¤ì • ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ê³µì§€ì‚¬í•­ ì €ì¥
    document.getElementById('saveAnnouncementBtn').addEventListener('click', async function(){
      const message = document.getElementById('announcementText').value;
      const active = document.getElementById('announcementActive').checked;
      
      try {
        const response = await fetch(`${API_BASE}/api/announcement`, {
          method: 'PUT',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            message,
            active,
            adminUsername: adminCredentials.username,
            adminPassword: adminCredentials.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert('ê³µì§€ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(data.message || 'ê³µì§€ ì €ì¥ ì‹¤íŒ¨');
        }
      } catch(err) {
        console.error('ê³µì§€ì‚¬í•­ ì €ì¥ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ì €ì¥
    document.getElementById('saveAdminAnnouncementBtn').addEventListener('click', async function(){
      const message = document.getElementById('adminAnnouncementText').value;
      const active = document.getElementById('adminAnnouncementActive').checked;
      
      try {
        const response = await fetch(`${API_BASE}/api/admin-announcement`, {
          method: 'PUT',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            message,
            active,
            adminUsername: adminCredentials.username,
            adminPassword: adminCredentials.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert('ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(data.message || 'ê³µì§€ ì €ì¥ ì‹¤íŒ¨');
        }
      } catch(err) {
        console.error('ê´€ë¦¬ì ì „ìš© ê³µì§€ì‚¬í•­ ì €ì¥ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ì˜ˆì•½ í˜„í™© í…Œì´ë¸” ì—…ë°ì´íŠ¸
    function updateReservationTable() {
      const tbody = document.getElementById('reservationTableBody');
      tbody.innerHTML = '';
      
      allReservations.forEach(reservation => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${reservation.name}</td>
          <td>${reservation.roomNo}</td>
          <td>${reservation.dormitory}</td>
          <td>${reservation.floor}</td>
          <td>${reservation.seat}</td>
          <td>${new Date(reservation.createdAt).toLocaleString('ko-KR')}</td>
          <td>
            <button class="view-password-btn" data-id="${reservation._id}">ë³´ê¸°</button>
            <span id="password-${reservation._id}">****</span>
          </td>
          <td>
            <button class="action-btn" data-id="${reservation._id}">ì·¨ì†Œ</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
      
      // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸° ë²„íŠ¼
      document.querySelectorAll('.view-password-btn').forEach(btn => {
        btn.addEventListener('click', async function(){
          const id = this.dataset.id;
          
          try {
            const response = await fetch(`${API_BASE}/api/admin/reservations/${id}/view-plain-password`, {
              method: 'POST',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                adminUsername: adminCredentials.username,
                adminPassword: adminCredentials.password
              })
            });
            
            const data = await response.json();
            
            if(response.ok && data.success) {
              document.getElementById(`password-${id}`).textContent = data.plainPassword;
            } else {
              alert(data.message || 'ë¹„ë°€ë²ˆí˜¸ ì¡°íšŒ ì‹¤íŒ¨');
            }
          } catch(err) {
            console.error('ë¹„ë°€ë²ˆí˜¸ ì¡°íšŒ ì‹¤íŒ¨:', err);
            alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          }
        });
      });
      
      // ì˜ˆì•½ ì·¨ì†Œ ë²„íŠ¼
      document.querySelectorAll('.action-btn').forEach(btn => {
        btn.addEventListener('click', async function(){
          const id = this.dataset.id;
          
          if(!confirm('ì •ë§ë¡œ ì´ ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
          }
          
          try {
            const response = await fetch(`${API_BASE}/api/reservations/${id}`, {
              method: 'DELETE',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                adminUsername: adminCredentials.username
              })
            });
            
            const data = await response.json();
            
            if(response.ok && data.success) {
              alert('ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
              alert(data.message || 'ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨');
            }
          } catch(err) {
            console.error('ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨:', err);
            alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
          }
        });
      });
    }

    // ëª¨ë“  ì˜ˆì•½ ì·¨ì†Œ
    document.getElementById('deleteAllReservationsBtn').addEventListener('click', async function(){
      if(!confirm('ì •ë§ë¡œ ëª¨ë“  ì˜ˆì•½ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        return;
      }
      
      try {
        const response = await fetch(`${API_BASE}/api/reservations/all`, {
          method: 'DELETE',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({
            adminUsername: adminCredentials.username,
            adminPassword: adminCredentials.password
          })
        });
        
        const data = await response.json();
        
        if(response.ok && data.success) {
          alert('ëª¨ë“  ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(data.message || 'ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨');
        }
      } catch(err) {
        console.error('ì „ì²´ ì˜ˆì•½ ì·¨ì†Œ ì‹¤íŒ¨:', err);
        alert('ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    });

    // ê³µì§€ì‚¬í•­ ëª¨ë‹¬ ë‹«ê¸°
    document.getElementById('closeAnnouncementModalBtn').addEventListener('click', function(){
      document.getElementById('announcementModal').classList.remove('active');
    });

    document.getElementById('closeAdminAnnouncementModalBtn').addEventListener('click', function(){
      document.getElementById('adminAnnouncementModal').classList.remove('active');
    });

    // Socket.IO ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    socket.on('reservationsInitial', (reservations) => {
      allReservations = reservations;
      if(selectedFloor && currentUser) {
        renderSeatMap();
      }
    });

    socket.on('reservationsUpdated', (reservations) => {
      allReservations = reservations;
      if(selectedFloor && currentUser) {
        renderSeatMap();
      }
      if(adminCredentials) {
        updateReservationTable();
      }
    });

    socket.on('announcementInitial', (announcement) => {
      if(announcement && announcement.active && announcement.message) {
        document.getElementById('announcementModalText').textContent = announcement.message;
        document.getElementById('announcementModal').classList.add('active');
      }
    });

    socket.on('announcementUpdated', (announcement) => {
      if(announcement && announcement.active && announcement.message) {
        document.getElementById('announcementModalText').textContent = announcement.message;
        document.getElementById('announcementModal').classList.add('active');
      } else {
        document.getElementById('announcementModal').classList.remove('active');
      }
    });

    socket.on('adminOnlyAnnouncementInitial', (announcement) => {
      if(adminCredentials && announcement && announcement.active && announcement.message) {
        document.getElementById('adminAnnouncementModalText').textContent = announcement.message;
        document.getElementById('adminAnnouncementModal').classList.add('active');
      }
    });

    socket.on('adminAnnouncementUpdated', (announcement) => {
      if(adminCredentials && announcement && announcement.active && announcement.message) {
        document.getElementById('adminAnnouncementModalText').textContent = announcement.message;
        document.getElementById('adminAnnouncementModal').classList.add('active');
      } else {
        document.getElementById('adminAnnouncementModal').classList.remove('active');
      }
    });

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    window.addEventListener('load', async () => {
      try {
        const response = await fetch(`${API_BASE}/api/reservations`);
        allReservations = await response.json();
      } catch(err) {
        console.error('ì´ˆê¸° ì˜ˆì•½ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', err);
      }
    });
  </script>
</body>
</html>
